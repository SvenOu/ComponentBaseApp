apply plugin: 'com.android.library'

dependencies {
    api fileTree(include: ['*.jar'], dir: 'libs')
    api project(':lib_common')
}

android {
    println "---开始加载module_guest配置文件---"
    def fileProvide = props['app.FACEBOOK_APP_ID']+props['app.FILE_PROVIDE']
    def testManifestPlaceholders = [
            UMENG_APP_KEY   : props['app.UMENG_APP_KEY'],
            UMENG_CHANNEL   : props['app.UMENG_CHANNEL'],
            FACEBOOK_APP_ID : props['app.FACEBOOK_APP_ID'],
            FABRIC_APIKEY   : props['app.FABRIC_APIKEY'],
            //for test
            GETUI_APP_ID    : props['app.TEST_GETUI_APP_ID'],
            GETUI_APP_KEY   : props['app.TEST_GETUI_APP_KEY'],
            GETUI_APP_SECRET: props['app.TEST_GETUI_APP_SECRET'],

            PACKAGE_NAME    : props['app.PACKAGE_NAME'],
            FILE_PROVIDE    : fileProvide
    ]
    def proManifestPlaceholders = [
            UMENG_APP_KEY   : props['app.UMENG_APP_KEY'],
            UMENG_CHANNEL   : props['app.UMENG_CHANNEL'],
            FACEBOOK_APP_ID : props['app.FACEBOOK_APP_ID'],
            FABRIC_APIKEY   : props['app.FABRIC_APIKEY'],
            //for pro
            GETUI_APP_ID    : props['app.PRO_GETUI_APP_ID'],
            GETUI_APP_KEY   : props['app.PRO_GETUI_APP_KEY'],
            GETUI_APP_SECRET: props['app.PRO_GETUI_APP_SECRET'],

            PACKAGE_NAME    : props['app.PACKAGE_NAME'],
            FILE_PROVIDE    : fileProvide
    ]
    def localManifestPlaceholders = [
            UMENG_APP_KEY   : props['app.UMENG_APP_KEY'],
            UMENG_CHANNEL   : props['app.UMENG_CHANNEL'],
            FACEBOOK_APP_ID : props['app.FACEBOOK_APP_ID'],
            FABRIC_APIKEY   : props['app.FABRIC_APIKEY'],
            //for dev
            GETUI_APP_ID    : props['app.DEV_GETUI_APP_ID'],
            GETUI_APP_KEY   : props['app.DEV_GETUI_APP_KEY'],
            GETUI_APP_SECRET: props['app.DEV_GETUI_APP_SECRET'],

            PACKAGE_NAME    : props['app.PACKAGE_NAME'],
            FILE_PROVIDE    : fileProvide
    ]

    compileSdkVersion "${buildVars.compileSdkVersion}".toInteger()
    buildToolsVersion "${buildVars.buildToolsVersion}"
    useLibrary 'org.apache.http.legacy'
    defaultConfig {
        versionCode props['app.versionCode'].toInteger()
        versionName props['app.versionName']
        minSdkVersion "${buildVars.minSdkVersion}".toInteger()
        targetSdkVersion "${buildVars.targetSdkVersion}".toInteger()

        //AndroidManifext.xml中的占位符的值，使用：android:value="${UMENG_APP_KEY}"
        if (props['app.currentMode'] == props['app.TEST_MODE']) {
            println "-------------------- " + props['app.TEST_MODE'] + "---------------------------"
            manifestPlaceholders = testManifestPlaceholders
            println "----------------GETUI_APP_ID---------" + props['app.TEST_GETUI_APP_ID'] + "------------------"
            println "----------------GETUI_APP_KEY---------" + props['app.TEST_GETUI_APP_KEY'] + "------------------"
            println "----------------GETUI_APP_SECRET---------" + props['app.TEST_GETUI_APP_SECRET'] + "------------------"

        } else if (props['app.currentMode'] == props['app.PROD_MODE']) {
            println "-------------------- " + props['app.PROD_MODE'] + "---------------------------"
            manifestPlaceholders = proManifestPlaceholders
            println "----------------GETUI_APP_ID---------" + props['app.PRO_GETUI_APP_ID'] + "------------------"
            println "----------------GETUI_APP_KEY---------" + props['app.PRO_GETUI_APP_KEY'] + "------------------"
            println "----------------GETUI_APP_SECRET---------" + props['app.PRO_GETUI_APP_SECRET'] + "------------------"

        } else {
            println "-------------------- " + props['app.DEV_MODE'] + "---------------------------"
            manifestPlaceholders = localManifestPlaceholders
            println "----------------GETUI_APP_ID---------" + props['app.DEV_GETUI_APP_ID'] + "------------------"
            println "----------------GETUI_APP_KEY---------" + props['app.DEV_GETUI_APP_KEY'] + "------------------"
            println "----------------GETUI_APP_SECRET---------" + props['app.DEV_GETUI_APP_SECRET'] + "------------------"
        }

        //Java代码中用BuildConfig.GOOGLE_MAP_APP_ID 调用key的值
        buildConfigField 'String', 'GOOGLE_MAP_APP_ID', props['app.GOOGLE_MAP_APP_ID']
        //GCM Config sender id.
//        buildConfigField 'String', 'GCM_SENDER_ID', '"145857549498"'

        buildConfigField 'String', 'CURRENT_MODE', props['app.currentMode']
        buildConfigField 'String', 'DEV_MODE', props['app.DEV_MODE']
        buildConfigField 'String', 'TEST_MODE', props['app.TEST_MODE']
        buildConfigField 'String', 'PROD_MODE', props['app.PROD_MODE']
        buildConfigField 'Boolean', 'PRINT_LOG', props['app.PRINT_LOG']
        buildConfigField 'String', 'DATA_BASE_NAME', '"'+props['app.DATA_BASE_NAME']+'"'
        buildConfigField 'String', 'FILE_PROVIDE', '"'+fileProvide+'"'
        buildConfigField 'String', 'AVATAR_CLIENT_ID', props['app.AVATAR_CLIENT_ID']
        buildConfigField 'String', 'AVATAR_PASSWORD', props['app.AVATAR_PASSWORD']
        buildConfigField 'String', 'FACEBOOK_APP_ID_JAVA', '"'+props['app.FACEBOOK_APP_ID']+'"'

        generatedDensities = []//for vector
        vectorDrawables.useSupportLibrary = true

//        ndk {
//            abiFilters "armeabi", "armeabi-v7a", "arm64-v8a", "mips", "mips64", "x86", "x86_64"
//        }
    }

}


